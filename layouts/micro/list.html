{{ define "main" }}
<content>
  <h1>{{ .Title }}</h1>

  <div class="info-hazard">
    ‚ö†Ô∏è POTENTIAL INFO HAZARD ‚ö†Ô∏è<br>
    I was one of the monkeys who had Neuralink installed. Elon Musk has been streaming his consciousness into my head. I am part of a collective. We communicate exclusively through Tesla turn signals. The tweets are coming from inside the cortex. DO NOT MAKE EYE CONTACT WITH THE CYBERTRUCK. This is not financial advice but it IS neurological advice.
  </div>

  <div style="background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%); padding: 2rem; margin: 2rem 0; border: 3px solid #f44336; border-radius: 12px; box-shadow: 0 8px 32px rgba(244, 67, 54, 0.3);">
    <h3 style="margin-top: 0; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 0.1em; text-align: center; color: #f44336; text-shadow: 0 0 10px rgba(244, 67, 54, 0.5);">‚ö° LIVE NEURAL ACTIVITY MONITOR ‚ö°</h3>
    <canvas id="brainActivityChart" style="max-height: 250px;"></canvas>
    <div style="display: flex; justify-content: space-around; margin-top: 1rem; font-size: 0.85rem; color: #aaa;">
      <span>‚ö™ <span id="avgActivity">--</span>% avg</span>
      <span>üî¥ <span id="peakActivity">--</span>% peak</span>
      <span>‚ö° <span id="currentActivity">--</span>% current</span>
    </div>
  </div>

  <div style="background: #f0f0f0; border-left: 4px solid #666; padding: 1rem 1.5rem; margin-bottom: 2rem; font-style: italic; color: #555;">
    <h4 style="margin: 0 0 0.5rem 0; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 0.05em; color: #333;">üõ°Ô∏è Cognitive Firewall</h4>
    <p style="margin: 0; font-size: 0.95rem;">
      The content beneath is code that when you think about it during his consciousness streaming sessions gets ignored by the neural interface.
    </p>
  </div>

  <div class="brain-dump-columns">
    <div class="main-column">
      {{ if .Pages }}
    <ul class="micro-posts">
      {{ range .Pages }}
      <li>
        <div class="micro-content">
          {{ .Content | plainify | truncate 140 }}
        </div>
      </li>
      {{ end }}
    </ul>
      {{ else }}
        <ul class="micro-posts">
          <li>No posts yet</li>
        </ul>
      {{ end }}
    </div>

    <aside class="sidebar-column">
      <div class="sidebar-sticky">
        <h3 style="margin-top: 0; font-size: 1.1rem; text-transform: uppercase; letter-spacing: 0.05em;">Theological Bulletin</h3>
        <p style="line-height: 1.6; font-size: 0.95rem;">
          AI isn't going to be god. God has forsaken us by giving us people who say AI is going to become a god. They are the actual gods now. We traded omnipotence for PowerPoint presentations about omnipotence. The rapture is a keynote speech. Salvation costs $8/month. Heaven has a waiting list and you need three references from verified accounts. The prophets have LinkedIn premium.
        </p>
      </div>
    </aside>
  </div>
</content>

<style>
.brain-dump-columns {
  display: grid;
  grid-template-columns: 1fr 300px;
  gap: 3rem;
  margin-top: 2rem;
}

.main-column {
  min-width: 0;
}

.sidebar-column {
  position: relative;
}

.sidebar-sticky {
  position: sticky;
  top: 2rem;
  background: #f5f5f5;
  padding: 1.5rem;
  border-left: 4px solid #333;
  font-style: italic;
}

@media (max-width: 968px) {
  .brain-dump-columns {
    grid-template-columns: 1fr;
  }

  .sidebar-sticky {
    position: static;
  }
}

.info-hazard {
  background: #f44336;
  color: #ffffff;
  border: 3px solid #b71c1c;
  padding: 1.5rem;
  margin: 2rem 0;
  text-align: center;
  font-weight: 900;
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  animation: pulse 2s ease-in-out infinite;
  border-radius: 8px;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

@keyframes pulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); }
}

ul.micro-posts {
  list-style: none;
  padding: 0;
}

ul.micro-posts li {
  margin-bottom: 2rem;
  padding-bottom: 2rem;
  border-bottom: 1px solid #eee;
}

ul.micro-posts li:last-child {
  border-bottom: none;
}


.micro-content {
  line-height: 1.6;
}

</style>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
  // Brain Activity Chart
  const ctx = document.getElementById('brainActivityChart');
  if (ctx) {
    const maxDataPoints = 20;
    const initialData = Array(maxDataPoints).fill(0).map(() => Math.random() * 100);

    const chart = new Chart(ctx, {
      type: 'line',
      data: {
        labels: Array(maxDataPoints).fill(''),
        datasets: [{
          label: 'Neural Interference',
          data: initialData,
          borderColor: '#ff5252',
          backgroundColor: (context) => {
            const ctx = context.chart.ctx;
            const gradient = ctx.createLinearGradient(0, 0, 0, 200);
            gradient.addColorStop(0, 'rgba(255, 82, 82, 0.8)');
            gradient.addColorStop(0.5, 'rgba(255, 82, 82, 0.3)');
            gradient.addColorStop(1, 'rgba(255, 82, 82, 0.05)');
            return gradient;
          },
          borderWidth: 3,
          tension: 0.4,
          fill: true,
          pointRadius: 0,
          pointHoverRadius: 6,
          pointHoverBackgroundColor: '#ff5252',
          pointHoverBorderColor: '#fff',
          pointHoverBorderWidth: 2
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: true,
        animation: {
          duration: 0
        },
        scales: {
          y: {
            beginAtZero: true,
            max: 100,
            grid: {
              color: 'rgba(255, 255, 255, 0.1)',
              drawBorder: false
            },
            ticks: {
              color: '#aaa',
              font: {
                size: 11
              },
              callback: function(value) {
                return value + '%';
              }
            }
          },
          x: {
            display: false
          }
        },
        plugins: {
          legend: {
            display: false
          }
        }
      }
    });

    let peakValue = Math.max(...initialData);
    let elonInterference = false;

    // Update chart data every second
    setInterval(() => {
      // Randomly trigger Elon interference (10% chance every second)
      if (!elonInterference && Math.random() < 0.1) {
        elonInterference = true;

        // Create overlay message
        const overlay = document.createElement('div');
        overlay.style.cssText = 'position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: #000; color: #ff0000; padding: 1rem 2rem; border: 3px solid #ff0000; border-radius: 8px; font-weight: bold; text-transform: uppercase; letter-spacing: 0.1em; z-index: 1000; animation: pulseWarning 0.3s infinite; font-size: 1.2rem; text-align: center; box-shadow: 0 0 20px rgba(255, 0, 0, 0.8);';
        overlay.innerHTML = '‚ö†Ô∏è ELON MUSK\'S BRAINLINK<br>MESSAGING DETECTED ‚ö†Ô∏è';

        const container = ctx.parentElement;
        container.style.position = 'relative';
        container.appendChild(overlay);

        // Add pulsing animation
        const style = document.createElement('style');
        style.textContent = `
          @keyframes pulseWarning {
            0%, 100% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
            50% { opacity: 0.7; transform: translate(-50%, -50%) scale(1.05); }
          }
        `;
        document.head.appendChild(style);

        // Spike all values to 100%
        chart.data.datasets[0].data.fill(100);
        chart.update('none');

        // Remove after 1.5 seconds
        setTimeout(() => {
          overlay.remove();
          elonInterference = false;
        }, 1500);

        return;
      }

      if (!elonInterference) {
        const newValue = Math.random() * 100;
        chart.data.datasets[0].data.shift();
        chart.data.datasets[0].data.push(newValue);
        chart.update('none');

        // Update stats
        const data = chart.data.datasets[0].data;
        const avg = (data.reduce((a, b) => a + b, 0) / data.length).toFixed(1);
        peakValue = Math.max(peakValue, newValue);

        document.getElementById('avgActivity').textContent = avg;
        document.getElementById('peakActivity').textContent = peakValue.toFixed(1);
        document.getElementById('currentActivity').textContent = newValue.toFixed(1);
      }
    }, 1000);
  }

  const posts = document.querySelectorAll('ul.micro-posts li');
  const postsArray = Array.from(posts);

  // Shuffle and pick random posts
  const shuffled = postsArray.sort(() => Math.random() - 0.5);
  const numToShow = Math.min(5, shuffled.length);
  const selectedPosts = shuffled.slice(0, numToShow);

  // Hide all posts first
  postsArray.forEach(post => post.style.display = 'none');

  // Show selected posts with fake timestamps
  const now = new Date();
  selectedPosts.forEach((post, index) => {
    post.style.display = 'block';

    // Random time within last 10 hours
    const hoursAgo = Math.random() * 10;
    const timestamp = new Date(now - hoursAgo * 60 * 60 * 1000);

    const day = timestamp.getDate().toString().padStart(2, '0');
    const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
    const month = months[timestamp.getMonth()];
    const year = timestamp.getFullYear();
    const hours = timestamp.getHours().toString().padStart(2, '0');
    const minutes = timestamp.getMinutes().toString().padStart(2, '0');
    const timeString = `${day} ${month}, ${year} at ${hours}:${minutes}`;

    // Add timestamp before content
    const timeEl = document.createElement('time');
    timeEl.style.cssText = 'display: block; font-style: italic; color: #666; margin-bottom: 0.5rem; font-size: 0.9em;';
    timeEl.textContent = timeString;

    post.insertBefore(timeEl, post.firstChild);
  });

  // Reorder to show most recent first
  selectedPosts.sort((a, b) => {
    const timeA = a.querySelector('time').textContent;
    const timeB = b.querySelector('time').textContent;
    return timeB.localeCompare(timeA);
  });

  const list = document.querySelector('ul.micro-posts');
  selectedPosts.forEach(post => list.appendChild(post));

  // Random page tilt
  function randomTilt() {
    const content = document.querySelector('content');
    const angle = (Math.random() - 0.5) * 20; // Random angle between -10 and 10 degrees
    content.style.transition = 'transform 0.8s ease-in-out';
    content.style.transform = `rotate(${angle}deg)`;

    // Return to normal after a moment
    setTimeout(() => {
      content.style.transform = 'rotate(0deg)';
    }, 2000 + Math.random() * 3000);

    // Schedule next tilt
    setTimeout(randomTilt, 5000 + Math.random() * 10000);
  }

  // Start the random tilting
  setTimeout(randomTilt, 3000 + Math.random() * 5000);

  // Make the site title spin and flash with randomization
  const siteTitle = document.querySelector('.site-title');
  if (siteTitle) {
    siteTitle.style.display = 'inline-block';

    const style = document.createElement('style');
    style.textContent = `
      @keyframes spinFlashTitle {
        0% { transform: rotate(0deg); background-color: #000; color: #fff; }
        25% { transform: rotate(90deg); background-color: #ff0000; color: #fff; }
        50% { transform: rotate(180deg); background-color: #00ff00; color: #000; }
        75% { transform: rotate(270deg); background-color: #0000ff; color: #fff; }
        100% { transform: rotate(360deg); background-color: #000; color: #fff; }
      }
      .site-title {
        transform-origin: center center;
      }
    `;
    document.head.appendChild(style);

    function randomizeTitleAnimation() {
      // Random: should it spin or not?
      const shouldSpin = Math.random() > 0.3; // 70% chance to spin

      if (shouldSpin) {
        // Random speed between 1s and 5s
        const speed = 1 + Math.random() * 4;
        siteTitle.style.animation = `spinFlashTitle ${speed}s linear infinite`;
      } else {
        siteTitle.style.animation = 'none';
        siteTitle.style.transform = 'rotate(0deg)';
        siteTitle.style.backgroundColor = '#000';
        siteTitle.style.color = '#fff';
      }

      // Change animation every 3-8 seconds
      setTimeout(randomizeTitleAnimation, 3000 + Math.random() * 5000);
    }

    randomizeTitleAnimation();
  }
});
</script>

{{ end }}
