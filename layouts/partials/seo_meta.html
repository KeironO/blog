{{ $title := .Title }}
{{ $description := .Site.Params.description }}
{{ $image := .Site.Params.images }}

{{ if eq .Kind "page" }}
  {{ if .Description }}
    {{ $description = .Description }}
  {{ else if .Summary }}
    {{ $description = .Summary | plainify | truncate 160 }}
  {{ end }}
  {{ if eq .Section "blog" }}
    {{ $title = printf "%s | %s" .Title .Site.Title }}
  {{ end }}
{{ else if eq .Kind "home" }}
  {{ $title = .Site.Title }}
{{ else }}
  {{ $title = printf "%s | %s" .Title .Site.Title }}
{{ end }}

<!-- SEO Meta Tags -->
<meta name="description" content="{{ $description }}">
<meta name="keywords" content="{{ if .Params.tags }}{{ delimit .Params.tags ", " }}{{ else }}{{ .Site.Params.keywords | default "blog, technology, programming, politics" }}{{ end }}">

<!-- Canonical URL -->
<link rel="canonical" href="{{ .Permalink }}">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="{{ if eq .Section "blog" }}article{{ else }}website{{ end }}">
<meta property="og:url" content="{{ .Permalink }}">
<meta property="og:title" content="{{ $title }}">
<meta property="og:description" content="{{ $description }}">
<meta property="og:site_name" content="{{ .Site.Title }}">
{{ with $image }}
<meta property="og:image" content="{{ index . 0 | absURL }}">
{{ end }}
{{ if eq .Section "blog" }}
<meta property="article:author" content="{{ .Site.Author }}">
<meta property="article:published_time" content="{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}">
<meta property="article:modified_time" content="{{ .Lastmod.Format "2006-01-02T15:04:05Z07:00" }}">
{{ with .Params.tags }}
{{ range . }}
<meta property="article:tag" content="{{ . }}">
{{ end }}
{{ end }}
{{ end }}

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:url" content="{{ .Permalink }}">
<meta name="twitter:title" content="{{ $title }}">
<meta name="twitter:description" content="{{ $description }}">
{{ with $image }}
<meta name="twitter:image" content="{{ index . 0 | absURL }}">
{{ end }}

<!-- RSS Feed Discovery -->
<link rel="alternate" type="application/rss+xml" title="{{ .Site.Title }} RSS Feed" href="{{ "blog/index.xml" | absURL }}">

<!-- Additional SEO -->
<meta name="robots" content="index, follow">
<meta name="googlebot" content="index, follow">
<meta name="language" content="{{ .Site.LanguageCode }}">
{{ if eq .Section "blog" }}
<meta name="author" content="{{ .Site.Author }}">
<meta name="revised" content="{{ .Lastmod.Format "2006-01-02" }}">
<meta name="topic" content="technology, politics, programming, healthcare">
{{ end }}


<!-- Verification for search engines (add when you get them) -->
<!-- <meta name="google-site-verification" content="YOUR_VERIFICATION_CODE"> -->
<!-- <meta name="msvalidate.01" content="YOUR_BING_VERIFICATION_CODE"> -->