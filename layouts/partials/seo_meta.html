{{ $title := .Title }}
{{ $description := .Site.Params.description }}
{{ $image := .Site.Params.images }}

{{ if eq .Kind "page" }}
  {{ if .Description }}
    {{ $description = .Description }}
  {{ else if .Summary }}
    {{ $description = .Summary | plainify | truncate 160 }}
  {{ end }}
  {{ if eq .Section "blog" }}
    {{ $title = printf "%s | %s" .Title .Site.Title }}
  {{ end }}
{{ else if eq .Kind "home" }}
  {{ $title = .Site.Title }}
{{ else }}
  {{ $title = printf "%s | %s" .Title .Site.Title }}
{{ end }}

<!-- Basic meta description (always included) -->
<meta name="description" content="{{ $description }}">

<!-- Conditional SEO Meta Tags - only for keiron.xyz -->
<script>
if (window.location.hostname === 'keiron.xyz') {
  document.addEventListener('DOMContentLoaded', function() {
    var head = document.head;

    // Keywords
    var keywords = document.createElement('meta');
    keywords.setAttribute('name', 'keywords');
    keywords.setAttribute('content', '{{ if .Params.tags }}{{ delimit .Params.tags ", " }}{{ else }}{{ .Site.Params.keywords | default "blog, technology, programming, politics" }}{{ end }}');
    head.appendChild(keywords);

    // Canonical URL
    var canonical = document.createElement('link');
    canonical.setAttribute('rel', 'canonical');
    canonical.setAttribute('href', '{{ .Permalink }}');
    head.appendChild(canonical);

    // Open Graph
    var ogType = document.createElement('meta');
    ogType.setAttribute('property', 'og:type');
    ogType.setAttribute('content', '{{ if eq .Section "blog" }}article{{ else }}website{{ end }}');
    head.appendChild(ogType);

    var ogUrl = document.createElement('meta');
    ogUrl.setAttribute('property', 'og:url');
    ogUrl.setAttribute('content', '{{ .Permalink }}');
    head.appendChild(ogUrl);

    var ogTitle = document.createElement('meta');
    ogTitle.setAttribute('property', 'og:title');
    ogTitle.setAttribute('content', '{{ $title }}');
    head.appendChild(ogTitle);

    var ogDescription = document.createElement('meta');
    ogDescription.setAttribute('property', 'og:description');
    ogDescription.setAttribute('content', '{{ $description }}');
    head.appendChild(ogDescription);

    var ogSiteName = document.createElement('meta');
    ogSiteName.setAttribute('property', 'og:site_name');
    ogSiteName.setAttribute('content', '{{ .Site.Title }}');
    head.appendChild(ogSiteName);

    {{ with $image }}
    var ogImage = document.createElement('meta');
    ogImage.setAttribute('property', 'og:image');
    ogImage.setAttribute('content', '{{ index . 0 | absURL }}');
    head.appendChild(ogImage);
    {{ end }}

    {{ if eq .Section "blog" }}
    var articleAuthor = document.createElement('meta');
    articleAuthor.setAttribute('property', 'article:author');
    articleAuthor.setAttribute('content', '{{ .Site.Author }}');
    head.appendChild(articleAuthor);

    var articlePublished = document.createElement('meta');
    articlePublished.setAttribute('property', 'article:published_time');
    articlePublished.setAttribute('content', '{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}');
    head.appendChild(articlePublished);

    var articleModified = document.createElement('meta');
    articleModified.setAttribute('property', 'article:modified_time');
    articleModified.setAttribute('content', '{{ .Lastmod.Format "2006-01-02T15:04:05Z07:00" }}');
    head.appendChild(articleModified);

    {{ with .Params.tags }}
    {{ range . }}
    var articleTag = document.createElement('meta');
    articleTag.setAttribute('property', 'article:tag');
    articleTag.setAttribute('content', '{{ . }}');
    head.appendChild(articleTag);
    {{ end }}
    {{ end }}
    {{ end }}

    // Twitter Card
    var twitterCard = document.createElement('meta');
    twitterCard.setAttribute('name', 'twitter:card');
    twitterCard.setAttribute('content', 'summary_large_image');
    head.appendChild(twitterCard);

    var twitterUrl = document.createElement('meta');
    twitterUrl.setAttribute('name', 'twitter:url');
    twitterUrl.setAttribute('content', '{{ .Permalink }}');
    head.appendChild(twitterUrl);

    var twitterTitle = document.createElement('meta');
    twitterTitle.setAttribute('name', 'twitter:title');
    twitterTitle.setAttribute('content', '{{ $title }}');
    head.appendChild(twitterTitle);

    var twitterDescription = document.createElement('meta');
    twitterDescription.setAttribute('name', 'twitter:description');
    twitterDescription.setAttribute('content', '{{ $description }}');
    head.appendChild(twitterDescription);

    {{ with $image }}
    var twitterImage = document.createElement('meta');
    twitterImage.setAttribute('name', 'twitter:image');
    twitterImage.setAttribute('content', '{{ index . 0 | absURL }}');
    head.appendChild(twitterImage);
    {{ end }}

    // RSS Feed Discovery
    var rssLink = document.createElement('link');
    rssLink.setAttribute('rel', 'alternate');
    rssLink.setAttribute('type', 'application/rss+xml');
    rssLink.setAttribute('title', '{{ .Site.Title }} RSS Feed');
    rssLink.setAttribute('href', '{{ "blog/index.xml" | absURL }}');
    head.appendChild(rssLink);

    // Additional SEO
    var robots = document.createElement('meta');
    robots.setAttribute('name', 'robots');
    robots.setAttribute('content', 'index, follow');
    head.appendChild(robots);

    var googlebot = document.createElement('meta');
    googlebot.setAttribute('name', 'googlebot');
    googlebot.setAttribute('content', 'index, follow');
    head.appendChild(googlebot);

    var language = document.createElement('meta');
    language.setAttribute('name', 'language');
    language.setAttribute('content', '{{ .Site.LanguageCode }}');
    head.appendChild(language);

    {{ if eq .Section "blog" }}
    var author = document.createElement('meta');
    author.setAttribute('name', 'author');
    author.setAttribute('content', '{{ .Site.Author }}');
    head.appendChild(author);

    var revised = document.createElement('meta');
    revised.setAttribute('name', 'revised');
    revised.setAttribute('content', '{{ .Lastmod.Format "2006-01-02" }}');
    head.appendChild(revised);

    var topic = document.createElement('meta');
    topic.setAttribute('name', 'topic');
    topic.setAttribute('content', 'technology, politics, programming, healthcare');
    head.appendChild(topic);
    {{ end }}
  });
} else {
  // For non-keiron.xyz domains, add noindex directive
  document.addEventListener('DOMContentLoaded', function() {
    var noindex = document.createElement('meta');
    noindex.setAttribute('name', 'robots');
    noindex.setAttribute('content', 'noindex, nofollow');
    document.head.appendChild(noindex);
  });
}
</script>


<!-- Verification for search engines (add when you get them) -->
<!-- <meta name="google-site-verification" content="YOUR_VERIFICATION_CODE"> -->
<!-- <meta name="msvalidate.01" content="YOUR_BING_VERIFICATION_CODE"> -->