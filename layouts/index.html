{{ define "main" }}
<style>
@media (max-width: 768px) {
    .card-date { display: none !important; }
    .card-date-mobile { display: block !important; }
    .index-card { flex-direction: column !important; gap: 0 !important; }
}
</style>

{{ .Content }}

<div style="display: flex; flex-direction: column; gap: 16px; margin-bottom: 30px;">
  {{ range first 3 (where .Site.RegularPages "Section" "blog") }}
  {{ $firstSentence := "" }}
  {{ if .Description }}
    {{ $firstSentence = .Description }}
  {{ else if .Summary }}
    {{ $firstSentence = .Summary }}
  {{ else }}
    {{ $content := .Plain }}
    {{ $sentence := findRE `[^.!?]*[.!?]` $content 1 }}
    {{ if $sentence }}
      {{ $firstSentence = index $sentence 0 }}
    {{ else }}
      {{ $firstSentence = truncate 150 $content }}
    {{ end }}
  {{ end }}

  <div class="index-card" style="
      background: #fff1e6;
      border: 3px solid #000;
      padding: 20px;
      transition: background-color 0.2s ease;
      cursor: pointer;
      display: flex;
      align-items: flex-start;
      gap: 20px;
  " onmouseover="this.style.backgroundColor='#ffede0'" onmouseout="this.style.backgroundColor='#fff1e6'" onclick="window.location.href='{{ .Permalink }}'">
    <div class="card-date" style="
        flex-shrink: 0;
        font-size: 0.85em;
        color: #666;
        font-weight: 500;
        min-width: 100px;
    ">
      {{ .Date.Format "02 Jan, 2006" }}
    </div>
    <div style="flex: 1;">
      <h4 style="margin: 0 0 10px 0; font-size: 1.2em; font-weight: bold;">
        <span style="color: #000;">{{ .Title }}</span>
      </h4>
      <p style="margin: 0; color: #333; line-height: 1.5; font-size: 0.95em;">
        {{ $firstSentence | plainify | truncate 200 }}
      </p>
      {{ if .Params.tags }}
        {{ $tags := delimit .Params.tags " #" }}
        <div style="margin-top: 8px; font-size: 0.85em; color: #666; font-weight: 500;">
          <span>#{{ $tags }}</span>
        </div>
      {{ end }}
      <div class="card-date-mobile" style="
          display: none;
          margin-top: 12px;
          font-size: 0.85em;
          color: #666;
          font-weight: 500;
      ">
        {{ .Date.Format "02 Jan, 2006" }}
      </div>
    </div>
  </div>
  {{ else }}
  <p>No blog posts found</p>
  {{ end }}
</div>

<small>
  <a href="{{ "blog" | relURL }}">View all posts â†’</a>
</small>
{{ end }}